(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2435],{27883:function(e,t,r){Promise.resolve().then(r.bind(r,87828))},87828:function(e,t,r){"use strict";r.d(t,{default:function(){return E}});var a=r(57437),s=r(2265),i=r(60177),n=r(16356),o=r(28196),c=r(38472),l=r(44785);let d=async e=>{if(e)try{return(await c.Z.get("".concat("https://testingbackend.ceramicandfoodproducts.com","/ReviewRating/search/").concat(e))).data}catch(e){var t,r,a,s;throw console.error("Axios fetch error:",(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||e.message),Error((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"An error occurred")}},u=async(e,t)=>{if(e&&t)try{return(await c.Z.get("".concat("https://testingbackend.ceramicandfoodproducts.com","/ReviewRating/search/").concat(e,"/").concat(t))).data}catch(e){var r,a,s,i;throw console.error("Axios fetch error:",(null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||e.message),Error((null===(i=e.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"An error occurred")}};var m=r(11444),p=r(39605);function x(e){let{productId:t,userId:d,close:x,userName:f}=e,[h,g]=(0,s.useState)(0),[v,b]=(0,s.useState)(!1),[j,y]=(0,s.useState)({}),w=l.Z.get("accessToken"),N=(0,m.I0)(),{loading:I}=(0,m.v9)(e=>e.product);(0,s.useEffect)(()=>{async function e(){try{let e=await u(d,t);y(e),N((0,p.M2)())}catch(e){console.error("Failed to fetch previous review:",e),N((0,p.M2)())}}N((0,p.mb)()),w&&d&&e()},[d,t,w,v]);let S=async e=>{e.preventDefault();let r=new FormData;r.append("review",e.target.comment.value),r.append("rating",e.target.star.value),r.append("product",t),r.append("user",d);try{let e=await c.Z.post("".concat("https://testingbackend.ceramicandfoodproducts.com","/ReviewRating/addReviewRating"),r,{headers:{"Content-Type":"application/json"}});201===e.status&&x()}catch(e){console.log(e)}},k=async e=>{e.preventDefault();let a=new FormData;a.append("review",e.target.edit_comment.value),a.append("rating",e.target.star_edit.value),a.append("product",t),a.append("user",d);try{let e=await c.Z.put("".concat("https://testingbackend.ceramicandfoodproducts.com","/ReviewRating/update/").concat(d,"/").concat(t),a,{headers:{"Content-Type":"application/json"}});if(200===e.status){x();let{revalidatePath:e}=await r.e(9088).then(r.t.bind(r,19088,23));e("/products/product-info/".concat(t))}}catch(e){console.log(e)}};return I?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsx)(a.Fragment,{children:j?(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("span",{className:"",children:[(0,a.jsx)(i.Z,{name:"read-only",defaultValue:3.5,precision:.5,value:parseInt(null==j?void 0:j.rating),readOnly:!0,sx:{fontSize:"1rem"}}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-[rgba(0,128,0,0.7)]",children:f}),(0,a.jsx)("span",{children:(0,a.jsx)(n.K7e,{color:"rgba(0,128,0,0.5)"})}),(0,a.jsx)("p",{className:"text-[0.65rem] font-extralight text-[blue]",children:"Verified Customer"})]})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("p",{className:" w-[70%]",children:[null==j?void 0:j.review,"!!!"]}),(0,a.jsx)("span",{className:"flex justify-end w-[30%] items-center cursor-pointer",children:(0,a.jsx)(o.AAC,{size:25,onClick:()=>b(!0)})})]}),(0,a.jsxs)("form",{onSubmit:k,className:"flex flex-col gap-3",children:[v&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(i.Z,{name:"star_edit",value:h,onChange:(e,t)=>{g(t)},sx:{fontSize:"2.5rem"}}),(0,a.jsx)("p",{className:"text-[2rem] font-bold text-[rgba(0,128,0,0.5)]",children:h})]}),v&&(0,a.jsx)("input",{defaultValue:null==j?void 0:j.review,type:"text",name:"edit_comment",className:"pl-2 border-2 border-[blue] py-[1rem]",placeholder:"Describe your brief thought..."}),v&&(0,a.jsx)("button",{className:"border bg-[rgba(0,128,0,0.2)] w-fit px-3 rounded-xl py-[0.5rem] font-bold text-[rgba(0,128,0,0.5)] hover:bg-white",type:"submit",children:"UPDATE"})]})]}):(0,a.jsx)("div",{className:"flex-flex-col",children:(0,a.jsxs)("form",{className:"flex flex-col gap-3",onSubmit:S,children:[(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("p",{className:"text-lg font-semibold text-[rgba(0,128,0,0.5)]",children:["Rate this product"," "]}),(0,a.jsx)("p",{className:"text-xs",children:"Tell others what you think"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(i.Z,{name:"star",value:h,onChange:(e,t)=>{g(t)},sx:{fontSize:"2.5rem"}}),(0,a.jsx)("p",{className:"text-[2rem] font-bold text-[rgba(0,128,0,0.5)]",children:h})]}),(0,a.jsx)("p",{className:"hover:text-[blue] text-[rgba(0,0,255,0.5)] cursor-pointer font-semibold  w-fit px-[0.5rem] rounded-lg hover:bg-[rgba(0,0,0,0.07)]",onClick:()=>{b(!0)},children:"Write a review"}),v&&(0,a.jsx)("input",{type:"text",name:"comment",className:"pl-2 border-2 border-[blue] py-[1rem]",placeholder:"Describe your brief thought..."}),v&&(0,a.jsx)("button",{className:"border bg-[rgba(0,128,0,0.2)] w-fit px-3 rounded-xl py-[0.5rem] font-bold text-[rgba(0,128,0,0.5)] hover:bg-white",type:"submit",children:"POST"})]})})})}var f=r(62501),h=r(91326),g=r(64379),v=r.n(g),b=r(16463),j=e=>{let{productId:t}=e,[r,o]=(0,s.useState)(!1),[c,l]=(0,s.useState)([]),{currentUser:u}=(0,m.v9)(e=>e.user),p=(0,b.usePathname)(),g=(0,b.useRouter)();(0,s.useEffect)(()=>{!async function(){try{let e=await d(t);e&&l(e)}catch(e){console.log(e)}}()},[r,t]);let j=()=>{o(!1)};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>{if(!u){g.push("/signin?redirect=".concat(p)),v().fire({position:"center",icon:"warning",title:"Please login First",showConfirmButton:!1,timer:1500});return}o(!0)},className:"border-[rgba(0,0,255,0.5)] border-2 px-4 py-2 text-[blue] rounded-md font-semibold",children:"Add Review & Feedback"}),(0,a.jsx)(f.Z,{open:r,onClose:j,children:(0,a.jsx)(h.Z,{className:"absolute top-1/2 lg:left-1/2 left-[45%] transform -translate-x-1/2 -translate-y-1/2 w-[90vw] lg:w-[60%] bg-white border-2 shadow-lg p-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x,{productId:t,userName:null==u?void 0:u.name,userId:null==u?void 0:u.Id,close:j}),(0,a.jsx)("button",{onClick:j,className:"bg-gray-50 shadow  rounded-full w-[25px] h-[25px] font-bold absolute !right-0 !top-0 bg-[rgba(255,255,255,0.3)]",children:"X"})]})})})]}),(0,a.jsx)("div",{children:c&&c.map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("span",{className:"",children:[(0,a.jsx)(i.Z,{name:"read-only",value:parseInt(null==e?void 0:e.rating),readOnly:!0,sx:{fontSize:"1rem"}}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-[rgba(0,128,0,0.7)]",children:null==e?void 0:e.user.name}),(0,a.jsx)("span",{children:(0,a.jsx)(n.K7e,{color:"rgba(0,128,0,0.5)"})}),(0,a.jsx)("p",{className:"text-[0.65rem] font-extralight text-[blue]",children:"Verified Customer"})]})]}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("p",{className:" w-[70%]",children:[null==e?void 0:e.review,"!!!"]})})]},t))})]})},y=r(43781),w=r(35023),N=()=>{let[e,t]=(0,s.useState)({}),[r,a]=(0,s.useState)([]);return(0,s.useEffect)(()=>{(async()=>{try{var e,r;let s=await c.Z.get("".concat("https://testingbackend.ceramicandfoodproducts.com","/Product/search/5"));t(s.data);let i=null===(r=s.data)||void 0===r?void 0:null===(e=r.json_attribute)||void 0===e?void 0:e.attributes,n=[];for(let e in i)n.push({[e]:i[e]});a(n)}catch(e){console.log(e.message)}})()},[]),{attributes:r}},I=r(28549),S=r(18409),k=r(28743),C=r(68038),P=r(87942),Z=e=>{let{inputAttribute:t,setInputAttribute:r}=e,{attributes:s}=N(),i={},n=e=>{let a=Object.keys(e),s=Object.values(e);i={...i,[a]:{[s]:1}},r({...t,...i})};return(0,a.jsx)("div",{children:s.map((e,t)=>(0,a.jsx)("div",{children:(0,a.jsxs)(I.Z,{children:[(0,a.jsx)(S.Z,{id:"demo-row-radio-buttons-group-label",children:Object.keys(e)[0]}),(0,a.jsx)(k.Z,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",children:Object.keys(Object.values(e)[0]).map((t,r)=>(0,a.jsx)(C.Z,{onChange:t=>n({[Object.keys(e)[0]]:t.target.value}),value:t,control:(0,a.jsx)(P.Z,{}),label:t},r))})]})},t))})},R=r(16182),A=e=>{let{product:t}=e,{handleAddWishlist:r,wishProducts:i,handleRemoveWishListProduct:n}=(0,s.useContext)(w.R),[o,c]=(0,s.useState)({}),l=(0,m.I0)();return i.find(e=>e.id===t.id),(0,a.jsxs)("div",{children:[(0,a.jsx)(Z,{inputAttribute:o,setInputAttribute:c}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2.5 mt-3",children:(0,a.jsxs)("button",{onClick:()=>{if(t.quantity<=0){v().fire({icon:"error",title:"Stock Out",text:"Sorry, this product is currently out of stock!"});return}let e={name:t.name,image:t.image,productId:t.id,price:t.price,count:1,totalPrice:t.price,attributes:o};l((0,R.Xq)(e))},className:"flex items-center gap-2 bg-[#192a56] px-4 py-2 text-white rounded-full active:scale-95 duration-200 font-medium hover:bg-[#273c75]",children:[(0,a.jsx)(y._0z,{className:"text-xl"})," ",(0,a.jsx)("span",{children:"Add To Cart"})]})})]})},O=r(66648),D=r(84494),E=e=>{var t;let{productId:r}=e,[i,n]=(0,s.useState)(null);if(console.log("product id",r),(0,s.useEffect)(()=>{(async()=>{try{let e=await (0,D.dQ)(r);n(e)}catch(e){console.error("Error fetching product by ID:",e)}})()},[r]),console.log("product",i),!i)return(0,a.jsx)("div",{className:"text-center text-gray-600 py-10",children:"Product not found or still loading..."});i.price,i.price;let o=i.quantity>0;return(0,a.jsx)("div",{className:"bg-white mb-28 lg:mb-6 h-fit",children:(0,a.jsxs)("div",{className:"mx-auto max-w-screen-xl px-4 flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"grid gap-8 md:grid-cols-2",children:[(0,a.jsx)(O.default,{src:i.image[0],alt:"Product Image",height:400,width:400,className:"h-[400px] w-full object-cover rounded-2xl"}),(0,a.jsxs)("div",{className:"md:py-8 space-y-4",children:[(0,a.jsxs)("div",{className:"mb-2 md:mb-3",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-[rgba(0,0,0,0.8)] lg:text-3xl",children:i.name}),(0,a.jsx)("span",{className:"mb-0.5 inline-block text-gray-500",children:i.category.name})]}),(0,a.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-start gap-3 lg:items-center justify-between",children:[(0,a.jsx)("div",{className:"flex flex-col"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("p",{children:"Availability"}),(0,a.jsx)("p",{className:"px-3 ms-3 text-white rounded-full font-medium ".concat(o?"bg-[#192a56]":"bg-red-600"),children:o?"In Stock":"Stock Out"})]})]}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsxs)("span",{className:"text-xl font-bold text-gray-800 md:text-2xl",children:["৳",i.price]})})]}),(0,a.jsx)(A,{product:i}),(0,a.jsx)("div",{className:"mt-12 text-base text-gray-500 tracking-wide",children:(t=i.desc)?t.replace(/<[^>]*>?/gm,""):""})]})]}),(0,a.jsx)(j,{productId:i.id})]})})}},84494:function(e,t,r){"use strict";r.d(t,{dQ:function(){return i},t2:function(){return s}});var a=r(38472);let s=async()=>{try{return(await a.Z.get("".concat("https://testingbackend.ceramicandfoodproducts.com","/Product/search"))).data}catch(e){throw console.log("Error fetching products:",e.message),Error("Failed to fetch products")}},i=async e=>{try{return(await a.Z.get("".concat("https://testingbackend.ceramicandfoodproducts.com","/Product/search/").concat(e))).data}catch(e){throw console.log("Error fetching product by ID:",e.message),Error("Failed to fetch product by ID")}}},16182:function(e,t,r){"use strict";r.d(t,{LL:function(){return l},Xq:function(){return s},dP:function(){return c},h2:function(){return n},z3:function(){return o}});let a=(0,r(81904).oM)({name:"cart",initialState:{items:[],isCartVisible:!1},reducers:{addToCart:(e,t)=>{if(e.items.some(e=>e.productId===t.payload.productId)){let r=e.items.find(e=>e.productId===t.payload.productId),a=r.count+1,s=r.price*a,i={...r,count:a,totalPrice:s},n=e.items.filter(e=>e.productId!==t.payload.productId);return{...e,items:[...n,i]}}return{...e,items:[...e.items,t.payload]}},addToCart:(e,t)=>{if(Array.isArray(e.items)||(e.items=[]),e.items.some(e=>e.productId===t.payload.productId)){let r=e.items.find(e=>e.productId===t.payload.productId),a=r.count+1,s=r.price*a,i={...r,count:a,totalPrice:s},n=e.items.filter(e=>e.productId!==t.payload.productId);e.items=[...n,i]}else e.items.push(t.payload)},removeFromCart:(e,t)=>{let r=e.items.filter(e=>e.productId!==t.payload);return{...e,items:[...r]}},cartCountIncrement:(e,t)=>{if(e.items.some(e=>e.productId===t.payload)){let r=[...e.items],a=r.find(e=>e.productId===t.payload),s=a.count+1,i=a.price*s,n={...a,count:s,totalPrice:i},o=r.findIndex(e=>e.productId===t.payload);return r.splice(o,1,{...n}),{...e,items:[...r]}}},cartCountDecrement:(e,t)=>{if(e.items.some(e=>e.productId===t.payload)){let r=[...e.items],a=r.find(e=>e.productId===t.payload),s=a.count-1,i=a.price*s,n={...a,count:s,totalPrice:i},o=r.findIndex(e=>e.productId===t.payload);return r.splice(o,1,{...n}),{...e,items:[...r]}}},clearCart:e=>{e.items=[],e.cartCount=0},cartVisible:(e,t)=>{e.isCartVisible=t.payload}}}),{addToCart:s,cartVisible:i,removeFromCart:n,cartCountIncrement:o,cartCountDecrement:c,clearCart:l}=a.actions;t.ZP=a.reducer},39605:function(e,t,r){"use strict";r.d(t,{M2:function(){return d},mb:function(){return i}});let a=(0,r(81904).oM)({name:"product",initialState:{ratingAverage:0,items:[],selectedProduct:null,reviews:[],loading:!1,error:null},reducers:{addProduct:(e,t)=>{e.items.push(t.payload)},fetchProductDetailsStart:e=>{e.loading=!0,e.error=null},fetchProductDetailsSuccess:(e,t)=>{e.selectedProduct=t.payload,e.loading=!1,e.error=null},fetchProductDetailsFailure:(e,t)=>{e.loading=!1,e.error=t.payload},addReview:(e,t)=>{e.reviews.push(t.payload)},addAverageRating:(e,t)=>{e.ratingAverage=t.payload},fetchReviewRatingSuccess:e=>{e.loading=!1}}}),{addProduct:s,fetchProductDetailsStart:i,fetchProductDetailsSuccess:n,fetchProductDetailsFailure:o,addReview:c,addAverageRating:l,fetchReviewRatingSuccess:d}=a.actions;t.ZP=a.reducer},35023:function(e,t,r){"use strict";r.d(t,{R:function(){return n}});var a=r(57437),s=r(2265),i=r(91502);let n=(0,s.createContext)();t.default=e=>{let{children:t}=e,[r,o]=(0,s.useState)(!1),[c,l]=(0,s.useState)(()=>(0,i.jy)()),d={isToggleOpen:r,handleDrawerOpen:e=>{o(e)},handleRemoveWishListProduct:e=>{(0,i.I)(e),l((0,i.jy)())},wishProducts:c,setWishProducts:l,wishListItems:c.length,handleAddWishlist:e=>{let t={id:e.id,name:e.name,image:e.image,stock:e.stock,price:e.price};(0,i.uN)(t),l((0,i.jy)())}};return(0,a.jsx)(n.Provider,{value:d,children:t})}},91502:function(e,t,r){"use strict";r.d(t,{I:function(){return i},jy:function(){return a},uN:function(){return s}});let a=()=>{let e;if("undefined"!=typeof localStorage){var t;e=null===(t=localStorage)||void 0===t?void 0:t.getItem("wishlist")}return e?JSON.parse(e):[]},s=e=>{let t=a();t.find(t=>t.id===e.id)||(t.push(e),localStorage.setItem("wishlist",JSON.stringify(t)))},i=e=>{let t=a();if(t.find(t=>t.id===e)){let r=t.filter(t=>t.id!==e);localStorage.removeItem("wishlist"),localStorage.setItem("wishlist",JSON.stringify(r))}}}},function(e){e.O(0,[9461,6051,1779,614,4413,8472,8173,9537,2501,1444,1904,9394,5697,492,8190,2971,7023,1744],function(){return e(e.s=27883)}),_N_E=e.O()}]);