(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5233],{10619:function(e,a,s){Promise.resolve().then(s.bind(s,21381))},21381:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return I}});var t=s(57437),l=s(2265),r=s(66648),d=s(29721),n=s(11444),i=s(16182),c=s(28549),o=s(94893),m=s(11656),u=e=>{let{cart:a,checkout:s}=e,{productId:l,image:u,price:p,name:x,quantity:h,color:j,count:f}=a,b=(0,n.I0)(),y=e=>{f>9||b((0,i.z3)(e))},v=e=>{f<2||b((0,i.dP)(e))},g=e=>{b((0,i.h2)(e))};return(0,t.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3 p-2 border-b border-dashed px-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(r.default,{width:56,height:56,src:u[0],alt:x,className:"object-cover w-[56px] h-[56px]"}),(0,t.jsxs)("div",{className:"space-y-1 md:space-y-1 text-secondary ",children:[(0,t.jsx)("h3",{className:"text-base ",children:x.length>22?"".concat(x.slice(0,22),"..."):x}),(0,t.jsxs)("div",{className:" flex items-center gap-3",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>v(l),className:"border border-gray-300 shadow text-center px-2 rounded-md text-xl",children:[" ","-"," "]}),(0,t.jsx)("span",{children:(null==a?void 0:a.count)||1}),(0,t.jsxs)("button",{type:"button",onClick:()=>y(l),className:"border border-gray-300 shadow text-center px-2 rounded-md text-xl",children:[" ","+"," "]})]}),s&&j&&(0,t.jsx)("div",{children:(0,t.jsx)(c.Z,{sx:{mt:"4px"},size:"small",children:(0,t.jsxs)(o.Z,{labelId:"demo-select-small-label",id:"demo-select-small",value:j,name:"color",defaultValue:"Select One",size:"small",sx:{"& .MuiSelect-select":{paddingX:"10px",paddingY:"4px"}},children:[(0,t.jsx)(m.Z,{value:"red",sx:{paddingY:"2px"},children:"Red"}),(0,t.jsx)(m.Z,{value:"green",sx:{paddingY:"2px"},children:"Green"}),(0,t.jsx)(m.Z,{value:"blue",sx:{paddingY:"2px"},children:"Blue"})]})})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-3 text-secondary",children:[(0,t.jsx)("button",{type:"button",onClick:()=>g(l),className:"text-secondary hover:text-red-600 duration-300 px-2 rounded-md",children:(0,t.jsx)(d.MSG,{className:"text-lg "})}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"mr-0.5",children:"৳"})," ",new Intl.NumberFormat().format(parseFloat(p*f).toFixed(2))]})]})]})})},p=s(866),x=s(76548),h=s(38472),j=s(69824),f=e=>{let{setCouponData:a}=e,[s,r]=(0,l.useState)(!1),[d,n]=(0,l.useState)(""),[i,o]=(0,l.useState)(""),m=async()=>{let e=new FormData;e.append("code",d);try{let s=await h.Z.post("".concat("https://testingbackend.ceramicandfoodproducts.com","/Coupon/check"),e,{headers:{"Content-Type":"multipart/formdata"}});200!==s.status&&a(!0)}catch(e){a(!0),console.log(e),o("Wrong Coupon Code")}};return(0,t.jsxs)("div",{className:"px-5 py-2",children:[(0,t.jsxs)("button",{className:"flex items-center mb-2 gap-2",onClick:()=>r(!0),children:[(0,t.jsx)("span",{className:"font-semibold text-lg",children:"Apply Coupon Code"}),(0,t.jsx)(j.OId,{className:"".concat(s&&"hidden"," text-xl")})]}),(0,t.jsx)("div",{className:"".concat(s||"hidden"),children:(0,t.jsx)(c.Z,{sx:{width:"100%"},variant:"outlined",size:"small",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.Z,{id:"outlined-adornment-password",type:"text",fullWidth:!0,value:d.toUpperCase(),onChange:e=>n(e.target.value)}),(0,t.jsx)(x.Z,{onClick:m,type:"button",variant:"contained",className:"!absolute !right-0 h-full !rounded-s-none",children:"Apply"})]})})}),i&&(0,t.jsx)("div",{className:"text-red-500 font-medium",children:i})]})},b=s(64379),y=s.n(b),v=s(66858),g=s(28743),N=s(68038),C=s(87942);let w=[{id:1,name:"Dhaka",value:"dhaka"},{id:2,name:"Chattogram",value:"chattogram"},{id:3,name:"Khulna",value:"khulna"},{id:4,name:"Rajshahi",value:"rajshahi"},{id:5,name:"Barishal",value:"barishal"},{id:6,name:"Sylhet",value:"sylhet"},{id:7,name:"Rangpur",value:"rangpur"},{id:8,name:"Mymensingh",value:"mymensingh"}];var I=()=>{let e=(0,n.I0)(),{items:a}=(0,n.v9)(e=>e.cart),{currentUser:s}=(0,n.v9)(e=>e.user),[d,p]=(0,l.useState)(null),[x,j]=(0,l.useState)({name:(null==s?void 0:s.name)||"",district:"dhaka",phone:(null==s?void 0:s.phone)||"",email:(null==s?void 0:s.email)||"",address:(null==s?void 0:s.address)||"",payMethod:"Cash"}),b=e=>{j({...x,[e.target.name]:e.target.value})},I=async t=>{if(t.preventDefault(),!s||0===a.length){y().fire("Error","User not logged in or cart is empty","error");return}let l={status:"Pending",user:{Id:null==s?void 0:s.Id},products:a.map(e=>({Id:e.productId,quantity:e.count,json_attribute:{attributes:e.attributes||{}}}))};try{await h.Z.post("".concat("https://testingbackend.ceramicandfoodproducts.com","/Order/add"),l,{headers:{"Content-Type":"application/json"}}),y().fire("Success","Order placed successfully!","success"),e((0,i.LL)()),j({name:"",district:"dhaka",phone:"",email:"",address:"",payMethod:"Cash"})}catch(e){console.error("Error submitting order:",e),y().fire("Error","Order submission failed!","error")}},Z=null==a?void 0:a.reduce((e,a)=>e+parseFloat(a.price)*a.count,0).toFixed(2),k=parseFloat(Z)+50;return(0,t.jsx)("div",{className:"h-full px-4 container mx-auto mt-4 md:mt-6 lg:mt-10 mb-12",children:(0,t.jsx)("form",{onSubmit:I,noValidate:!0,autoComplete:"off",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,t.jsxs)("div",{className:"text-secondary font-medium",children:[(0,t.jsxs)(c.Z,{className:"w-full space-y-2 !mb-1",children:[(0,t.jsxs)("label",{children:["Name: ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Z,{name:"name",onChange:b,value:x.name,placeholder:"Enter Your Name",size:"small",required:!0})]}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,t.jsxs)(c.Z,{className:"w-full space-y-2 !mb-1",children:[(0,t.jsxs)("label",{children:["Phone: ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Z,{name:"phone",type:"number",onChange:b,value:x.phone,placeholder:"Enter Your Phone",size:"small",required:!0})]}),(0,t.jsxs)(c.Z,{className:"w-full space-y-2 !mb-6",children:[(0,t.jsxs)("label",{children:["Email: ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Z,{name:"email",type:"email",onChange:b,value:x.email,placeholder:"Enter Your Email",size:"small",required:!0})]})]}),(0,t.jsxs)(c.Z,{className:"w-full space-y-2 !mb-6",children:[(0,t.jsxs)("label",{children:["District: ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(o.Z,{value:x.district,name:"district",onChange:b,size:"small",children:w.map(e=>(0,t.jsx)(m.Z,{value:e.value,children:e.name},e.id))})]}),(0,t.jsxs)(c.Z,{className:"w-full space-y-2 !mb-1",children:[(0,t.jsxs)("label",{children:["Address: ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Z,{name:"address",onChange:b,value:x.address,placeholder:"Enter Your Address",size:"small",rows:2,multiline:!0,required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-12 max-h-[400px] overflow-y-auto",children:null==a?void 0:a.map((e,a)=>(0,t.jsx)(u,{cart:e,checkout:!0},a))}),(0,t.jsxs)("div",{className:" text-secondary  px-5 py-2 mb-6 flex gap-3 justify-between font-medium",children:[(0,t.jsx)("h3",{children:"Sub Total:"}),(0,t.jsxs)("span",{className:"mr-0.5 font-bold",children:["৳ ",Z]})]}),(0,t.jsxs)("div",{children:[d||(0,t.jsx)(f,{setCouponData:p}),d&&(0,t.jsx)("div",{className:"px-5 py-2 mb-6 text-dash-primary",children:"You get 20% Off"})]}),(0,t.jsxs)("div",{className:" text-secondary  px-5 py-2 mb-6 flex gap-3 justify-between font-medium",children:[(0,t.jsx)("h3",{children:"Shipping Charge:"}),(0,t.jsxs)("span",{className:"mr-0.5 font-bold",children:["৳ ",50]})]}),(0,t.jsxs)("div",{className:" text-secondary border-y-gray-300  border-y px-5 py-2 mb-6 flex gap-3 justify-between font-medium",children:[(0,t.jsx)("h3",{children:"Total:"}),(0,t.jsxs)("span",{className:"mr-0.5 font-bold",children:["৳ ",k.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"border shadow p-5",children:[(0,t.jsx)(c.Z,{children:(0,t.jsxs)(g.Z,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"payMethod",value:x.payMethod,onChange:b,children:[(0,t.jsx)(N.Z,{value:"Cash",control:(0,t.jsx)(C.Z,{}),label:"Cash In Delivery"}),(0,t.jsxs)("div",{className:"flex  items-center",children:[(0,t.jsx)(N.Z,{value:"Bikash",control:(0,t.jsx)(C.Z,{}),label:"Bikash"}),(0,t.jsx)(r.default,{src:"/icons/payment-icon/bKash.webp",alt:"bikash",width:70,height:40,className:"w-[70px] h-auto"})]}),(0,t.jsxs)("div",{className:"flex  items-center",children:[(0,t.jsx)(N.Z,{value:"Nagad",control:(0,t.jsx)(C.Z,{}),label:"Nagad"}),(0,t.jsx)(r.default,{src:"/icons/payment-icon/nagad.webp",alt:"nagad",width:70,height:40,className:"w-[70px] h-auto"})]}),(0,t.jsxs)("div",{className:"flex  items-center",children:[(0,t.jsx)(N.Z,{value:"Visa_Master",control:(0,t.jsx)(C.Z,{}),label:"Visa card/Mastercard"}),(0,t.jsx)(r.default,{src:"/icons/payment-icon/sslcz-verified.webp",alt:"ssl verification",width:70,height:40,className:"w-[70px] h-auto"})]})]})}),(0,t.jsx)("div",{className:"flex items-center mt-4 mb-4 justify-center gap-6",children:(0,t.jsx)("button",{type:"submit",className:"px-10 py-3 w-full text-center font-medium duration-300 border border-gray-300 bg-primary  text-white rounded active:scale-95",children:"Place Order"})})]})]})]})})})}},16182:function(e,a,s){"use strict";s.d(a,{LL:function(){return c},Xq:function(){return l},dP:function(){return i},h2:function(){return d},z3:function(){return n}});let t=(0,s(81904).oM)({name:"cart",initialState:{items:[],isCartVisible:!1},reducers:{addToCart:(e,a)=>{if(e.items.some(e=>e.productId===a.payload.productId)){let s=e.items.find(e=>e.productId===a.payload.productId),t=s.count+1,l=s.price*t,r={...s,count:t,totalPrice:l},d=e.items.filter(e=>e.productId!==a.payload.productId);return{...e,items:[...d,r]}}return{...e,items:[...e.items,a.payload]}},addToCart:(e,a)=>{if(Array.isArray(e.items)||(e.items=[]),e.items.some(e=>e.productId===a.payload.productId)){let s=e.items.find(e=>e.productId===a.payload.productId),t=s.count+1,l=s.price*t,r={...s,count:t,totalPrice:l},d=e.items.filter(e=>e.productId!==a.payload.productId);e.items=[...d,r]}else e.items.push(a.payload)},removeFromCart:(e,a)=>{let s=e.items.filter(e=>e.productId!==a.payload);return{...e,items:[...s]}},cartCountIncrement:(e,a)=>{if(e.items.some(e=>e.productId===a.payload)){let s=[...e.items],t=s.find(e=>e.productId===a.payload),l=t.count+1,r=t.price*l,d={...t,count:l,totalPrice:r},n=s.findIndex(e=>e.productId===a.payload);return s.splice(n,1,{...d}),{...e,items:[...s]}}},cartCountDecrement:(e,a)=>{if(e.items.some(e=>e.productId===a.payload)){let s=[...e.items],t=s.find(e=>e.productId===a.payload),l=t.count-1,r=t.price*l,d={...t,count:l,totalPrice:r},n=s.findIndex(e=>e.productId===a.payload);return s.splice(n,1,{...d}),{...e,items:[...s]}}},clearCart:e=>{e.items=[],e.cartCount=0},cartVisible:(e,a)=>{e.isCartVisible=a.payload}}}),{addToCart:l,cartVisible:r,removeFromCart:d,cartCountIncrement:n,cartCountDecrement:i,clearCart:c}=t.actions;a.ZP=t.reducer}},function(e){e.O(0,[9461,5452,6305,4413,8472,8173,9537,8729,2501,1444,4312,1904,6291,9394,4893,6858,492,585,2971,7023,1744],function(){return e(e.s=10619)}),_N_E=e.O()}]);